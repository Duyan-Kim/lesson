# DOM(Document Object Model)

DOM : 문서를 제어하는 API

## DOM 트리

웹 브라우저가 웹 페이지를 읽어 들이면

렌더링 엔진은 웹 페이지의 HTML구문을 해석하고

Document객체에서 문서내용을 관리하는 **DOM트리** 라고 하는 객체의 트리구조를 만든다.

DOM트리를 구성하는 객체 하나를 Node라고 한다.

​

## 주요 노드의 종류

1. **문서노드** : 전체 문서를 가리키는 Document객체. document로 참조할 수 있다

2. **HTML 요소 노드** : HTML 요소를 가리키는 객체.

3. **텍스트 노드** : 요소 내의 텍스트를 가리키는 객체. 문자열만 담고, 자식노드를 가질 수 없다.

   - 새로운 줄(newline)과 공백(space)은 항상 유효한 문자로 취급되어 텍스트 노드가 된다.

   - 단, <head>이전의 공백과 새로운 줄은 무시된다. <body> 뒤에 무언가를 넣으면 자동으로 body안쪽으로 옮겨져 body뒤엔 공백이 있을 수 없다.

4. **주석comment 노드**: 텍스트 노드 사이에 존재하며, 화면 출력물에 영향을 주지 않아도 HTML안의 모든 것은 DOM트리에 추가되는 규칙으로 인해 DOM을 구성한다.

​

## DOM트리가 나타내는 HTML element의 부모-자식 관계

- 노드 A 바로 아래에 노드 B가 있을 때 A는 B의 **부모 노드**

- 노드 A 바로 아래에 노드 B가 있을 때 B는 A의 **자식 노드**

- **형제 노드** : 같은 부모를 가진 같은 레벨의 노드

- **후손 노드** : 중첩관계에 있는 모든 요소. 자식노드, 자식노드의 자식노드 등

- **조상 노드** : Document 객체는 모든 노드의 조상 노드, DOM트리의 루트

​

## 노드 객체의 DOM트리 계층을 표현하는 프로퍼티 예시

1. `parentNode`

   해당 노드의 부모 노드 참조. Document객체의 부모 노드는 null

2. `childNodes`

   해당 노드의 자식 노드 참조를 저장한 유사 배열 객체(NodeList). 반복 가능한 컬렉션.

3. `firstChild`

   첫번째 자식 노드

4. `lastChild`

   마지막 자식 노드

​

### childNodes의 특징

1. for..of를 사용할 수 있다.

```
for (let node of document.body.childNodes) {
  alert(node); // 컬렉션 내의 모든 노드를 보여준다.
}
```

2. 배열이 아니기 때문에 배열 메소드를 쓸 수 없다. Array.from을 사용하면 배열 메소드를 쓸 수 있다.

<br>

---

> 자바스크립트를 사용하면 DOM트리의 노드 객체를 가져와서 제어할 수 있다. 렌더링 엔진은 DOM트리와 스타일 규칙이 바뀔 때마다 렌더 트리를 다시 구성해서 웹페이지를 다시 그린다. HTML요소를 제어하려면 제어하고자 하는 element객체를 먼저 가져와야 한다.

​

## 노드 객체 가져오기

1. **id 속성** 으로 노드 가져오기

```
document.getElementById('id값')
```

2. **element 이름** 으로 노드 가져오기

```
document.getElementsByTagName('태그 이름')
```

NodeList객체를 반환함

```
document.getElementsByTagName('*')
```

요소 이름 대신 NodeList에 HTML 문서 안의 모든 요소를 담아서 반환할 수도 있다.

​

> NodeList 객체는 살아있는 상태를 가리킨다. 특정 시점의 정적인 상태를 표현하는 것이 아니라 HTML 문서의 변화에 따라 동적으로 바뀐다.
>
> - div가 없는 상태에서 div 요소 목록을 가져온 후 나중에 div를 html에 추가해도 div 요소 목록에 반영이 된다는 뜻이다.
> - NodeList 객체를 순회하면서 요소를 추가해야하는 상황에서는 주의를 기울여야하는 특성이다.
> - 'getElementsBy'로 시작하는 모든 메소드는 살아있는 컬렉션을 반환한다. 문서에 변경이 있을 때마다 컬렉션이 자동으로 갱신되어 최신 상태를 유지한다.

​

3. **class 속성 값** 으로 노드 가져오기

```
document.getElementsByClassName('class이름')
```

4. **name 속성 값** 으로 노드 가져오기

name 속성은 form, input, iframe, img, map, object 요소 등에 지정할 수 있다.

```
document.getElementsByName('name속성값')
```

5. **css 선택자** 로 노드 가져오기

```
document.querySelectorAll('선택자')
```

인수로 넘긴 산택자와 일치하는 요소 객체가 담긴 NodeList를 가져올 수 있다.

이때 NodeList는 살아있는 상태가 아니다. 메소드를 호출한 시점에 일치한 요소만을 NodeList에 포함한다.

```
document.querySelector('선택자')
```

지정한 선택자와 일치하는 요소 객체 중에서 문서 위치가 첫번째인 요소 객체를 반환한다.

해당 요소를 찾으면 검색을 멈추기 때문에 querySelectorAll보다 빠르다.  
<br>

---

## DOM 노드 클래스

DOM노드는 공통 조상으로부터 만들어지기 때문에 공통 프로퍼티와 메소드가 있다.

각 DOM 노드는 대응하는 내장 클래스에 속한다. 계층 구조의 꼭대기에는 EventTarget이 있고

Node는 EventTarget을 , 다른 DOM 노드들은 Node를 상속 받는다.

instanceof를 통해 상속 여부를 확인할 수 있다.

```
alert( document.body instanceof EventTarget ); // true
```

## 속성 값 읽기, 쓰기

1. 요소 객체의 프로퍼티로 요소의 속성 읽고 쓰기

`요소객체. 속성이름`

```
<a href = "home" href = "www.google.com"></a>

let aTag = document.getElementById('home')
console.log(aTag.href)
```

2. 속성 값 가져오기

`요소객체.getAttribute(속성이름)`

​

3. 속성 값 설정하기

`요소객체.setAttribute(속성이름, 속성 값)`

```
aTag.setAttribute("href", "www.naver.com")
```

### getAttribute와 setAttribute메서드가 요소 객체의 속성 프로퍼티보다 좋은 점

- HTML의 일반적인 속성뿐만 아니라 모든 속성을 설정할 수 있다

- 속성 이름을 프로그램 실행 중에 동적으로 설정할 수 있다

​

4. 속성이 있는지 확인하기

`요소객체.hasAttribute(속성이름)`

​

5. 속성 삭제

`요소객체.removeAttribute(속성이름)`

​

6. 전체 속성 목록 가져오기

NamedNodeMap객체로 요소객체에는 설정된 모든 속성의 속성 노드 객체가 담겨있다.

# ​

## 내용 조작하기

1. `innerHTML`

요소 안의 HTML을 문자열 형태로 받아올 수 있다. 요소 안의 HTML을 수정할 수 있다.

​

2. `outerHTML`

요소 안의 전체 HTML을 볼 수 있다. 요소가 수정되지 않는다.

​

3. `nodeValue`

innerHTML은 요소 노드에만 사용할 수 있고, nodeValue와 data를 이용하면 텍스트노드의 내용을 조작할 수 있다.

​

4. `textContent`

태그는 제외하고 요소 내의 텍스트에 접근할 수 있다. textContent를 사용하면 텍스트를 안전한 방법으로 쓸 수 있기 때문에 다양한 곳에서 쓰기 용으로 유용하게 사용된다.
